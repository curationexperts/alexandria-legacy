---
- name: write ADRL settings to application.yml
  become: yes
  lineinfile:
      backup: yes
      dest: "{{ config_path }}/application.yml"
      state: present
      insertafter: ^default
      line: "{{ item }}"
  with_items:
    - "  download_root: {{ etd_download_root }}"
    - "  internal_local_vocab_root: http://<%= Rails.application.config.host_name %>"
    - "  marmotta_host: {{ marmotta_server }}:8080"
    - "  minter_state: {{ minter_state_location }}"
    - "  pegasus_sru_endpoint: 'http://pegasus.library.ucsb.edu:5661'"

- name: write ADRL test settings to application.yml
  become: yes
  lineinfile:
      backup: yes
      dest: "{{ config_path }}/application.yml"
      state: present
      insertafter: ^test
      line: "{{ item }}"
  with_items:
    - "  marmotta_host: localhost:8180"
